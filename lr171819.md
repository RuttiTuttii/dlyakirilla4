–Ø –ø–æ–º–æ–≥—É –≤–∞–º –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ —Ç—Ä–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –≤ –æ–¥–∏–Ω –ø—Ä–æ–µ–∫—Ç ASP.NET Core. –í–æ—Ç –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ASP.NET Core

```
CinemaWebApp/
‚îú‚îÄ‚îÄ Program.cs
‚îú‚îÄ‚îÄ appsettings.json
‚îú‚îÄ‚îÄ Pages/
‚îÇ   ‚îú‚îÄ‚îÄ Shared/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _Layout.cshtml
‚îÇ   ‚îú‚îÄ‚îÄ Films/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Index.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Create.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Edit.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Delete.cshtml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Details.cshtml
‚îÇ   ‚îú‚îÄ‚îÄ Tickets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Index.cshtml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Details.cshtml
‚îÇ   ‚îú‚îÄ‚îÄ Sessions/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Index.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Create.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Edit.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Delete.cshtml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Details.cshtml
‚îÇ   ‚îú‚îÄ‚îÄ Visitors/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Index.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Create.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Edit.cshtml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Delete.cshtml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Details.cshtml
‚îÇ   ‚îú‚îÄ‚îÄ Login.cshtml
‚îÇ   ‚îú‚îÄ‚îÄ AuthPage.cshtml
‚îÇ   ‚îî‚îÄ‚îÄ Index.cshtml
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ Film.cs
‚îÇ   ‚îú‚îÄ‚îÄ Session.cs
‚îÇ   ‚îú‚îÄ‚îÄ Hall.cs
‚îÇ   ‚îú‚îÄ‚îÄ Ticket.cs
‚îÇ   ‚îú‚îÄ‚îÄ Visitor.cs
‚îÇ   ‚îî‚îÄ‚îÄ AuthPageModel.cs
‚îî‚îÄ‚îÄ Data/
    ‚îî‚îÄ‚îÄ CinemaContext.cs
```

üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Program.cs)

```csharp
var builder = WebApplication.CreateBuilder(args);

// –î–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–∏—Å—ã
builder.Services.AddRazorPages();
builder.Services.AddDbContext<CinemaContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));
builder.Services.AddSession();
builder.Services.AddHttpContextAccessor();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª–∏ –¥–ª—è –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —á–∏—Å–µ–ª
CultureInfo.DefaultThreadCurrentCulture = new CultureInfo("ru-RU") 
{ 
    NumberFormat = { NumberDecimalSeparator = "." } 
};

var app = builder.Build();

if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseRouting();
app.UseAuthorization();
app.UseSession(); // –í–∫–ª—é—á–∞–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–µ—Å—Å–∏–π
app.MapRazorPages();
app.Run();
```

2. –ú–æ–¥–µ–ª—å Session —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ –õ–† ‚Ññ19

```csharp
// Models/Session.cs
public class Session
{
    public int SessionId { get; set; }
    
    [Display(Name = "–§–∏–ª—å–º")]
    public int FilmId { get; set; }
    
    [Display(Name = "–ó–∞–ª")]
    public byte HallId { get; set; }
    
    [Display(Name = "–¶–µ–Ω–∞")]
    [DataType(DataType.Currency)]
    [Range(0.01, 10000.00, ErrorMessage = "–¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç {1} –¥–æ {2}")]
    public decimal Price { get; set; }
    
    [Display(Name = "–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞")]
    [DataType(DataType.DateTime)]
    public DateTime StartDate { get; set; }
    
    [Display(Name = "3D")]
    public bool Is3d { get; set; }
    
    // –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
    public virtual Film? Film { get; set; }
    public virtual Hall? Hall { get; set; }
}

// –ú–æ–¥–µ–ª—å –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã Sessions/Index —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –∏–∑ –õ–† ‚Ññ19
public class SessionsIndexModel : AuthPageModel
{
    private readonly CinemaContext _context;
    
    // –°–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    [BindProperty(SupportsGet = true)]
    public string FilmTitle { get; set; }
    
    [BindProperty(SupportsGet = true)]
    public string SortColumn { get; set; }
    
    [BindProperty(SupportsGet = true)]
    public int? Hall { get; set; }
    
    [BindProperty(SupportsGet = true)]
    public int PageIndex { get; set; } = 1;
    
    public int TotalPages { get; set; }
    public int PageSize { get; set; } = 10;
    
    public IList<Session> Sessions { get; set; }
    
    public SessionsIndexModel(CinemaContext context)
    {
        _context = context;
    }
    
    public async Task OnGetAsync()
    {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏
        if (HasRole() is IActionResult result) return;
        
        IQueryable<Session> sessionsQuery = _context.Sessions
            .Include(s => s.Film)
            .Include(s => s.Hall);
        
        // –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ñ–∏–ª—å–º–∞
        if (!string.IsNullOrEmpty(FilmTitle))
        {
            sessionsQuery = sessionsQuery.Where(s => s.Film.Title.Contains(FilmTitle));
        }
        
        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∑–∞–ª—É
        if (Hall.HasValue)
        {
            sessionsQuery = sessionsQuery.Where(s => s.HallId == Hall.Value);
        }
        
        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
        sessionsQuery = SortColumn switch
        {
            "price_desc" => sessionsQuery.OrderByDescending(s => s.Price),
            "price" => sessionsQuery.OrderBy(s => s.Price),
            _ => sessionsQuery.OrderBy(s => s.StartDate)
        };
        
        // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
        var count = await sessionsQuery.CountAsync();
        TotalPages = (int)Math.Ceiling(count / (double)PageSize);
        
        Sessions = await sessionsQuery
            .Skip((PageIndex - 1) * PageSize)
            .Take(PageSize)
            .ToListAsync();
            
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–ª–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞
        ViewData["Halls"] = new SelectList(_context.Halls, "HallId", "CinemaInfo");
    }
}
```

3. –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å AuthPageModel (–õ–† ‚Ññ17)

```csharp
// Models/AuthPageModel.cs
public class AuthPageModel : PageModel
{
    public string UserRole => HttpContext.Session.GetString("Role") ?? string.Empty;
    public bool IsAdmin => UserRole == "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä";
    public bool IsTicketSeller => UserRole == "–ë–∏–ª–µ—Ç–µ—Ä";
    public bool IsGuest => UserRole == "–ì–æ—Å—Ç—å";
    
    protected IActionResult? HasRole()
    {
        if (string.IsNullOrEmpty(UserRole))
            return RedirectToPage("/Login");
        return null;
    }
    
    protected IActionResult? IsInRole(string role)
    {
        if (UserRole != role)
            return RedirectToPage("/Login");
        return null;
    }
    
    protected IActionResult? CanEdit()
    {
        if (!IsAdmin)
            return RedirectToPage("/Login");
        return null;
    }
}
```

4. –°—Ç—Ä–∞–Ω–∏—Ü–∞ Login (–õ–† ‚Ññ17)

```csharp
// Pages/Login.cshtml.cs
public class LoginModel : PageModel
{
    private readonly CinemaContext _context;
    
    [BindProperty]
    public string Username { get; set; }
    
    [BindProperty]
    public string Password { get; set; }
    
    public LoginModel(CinemaContext context)
    {
        _context = context;
    }
    
    public IActionResult OnPostLogin()
    {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
        var user = _context.Users.FirstOrDefault(u => 
            u.Username == Username && u.Password == Password);
        
        if (user != null)
        {
            HttpContext.Session.SetString("Role", user.Role);
            HttpContext.Session.SetString("Username", user.Username);
            return RedirectToPage("/Films/Index");
        }
        
        return Page();
    }
    
    public IActionResult OnPostGuest()
    {
        HttpContext.Session.Clear();
        HttpContext.Session.SetString("Role", "–ì–æ—Å—Ç—å");
        return RedirectToPage("/Films/Index");
    }
    
    public IActionResult OnGetLogout()
    {
        HttpContext.Session.Clear();
        return RedirectToPage("/Index");
    }
}
```

5. –†–∞–∑–º–µ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Sessions —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –õ–† ‚Ññ19

```html
<!-- Pages/Sessions/Index.cshtml -->
@page
@model SessionsIndexModel

<!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
<form method="get">
    <div class="row mb-3">
        <!-- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ñ–∏–ª—å–º–∞ -->
        <div class="col-md-4">
            <input type="text" 
                   name="filmTitle" 
                   value="@Model.FilmTitle" 
                   placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ñ–∏–ª—å–º–∞..."
                   class="form-control" 
                   onchange="this.form.submit()" />
        </div>
        
        <!-- –§–∏–ª—å—Ç—Ä –ø–æ –∑–∞–ª—É -->
        <div class="col-md-3">
            <select class="form-control" 
                    asp-items="ViewBag.Halls" 
                    name="hall"
                    onchange="this.form.submit()">
                <option value="">–í—Å–µ –∑–∞–ª—ã</option>
            </select>
        </div>
        
        <!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
        <div class="col-md-3">
            <select class="form-control" 
                    name="sortColumn"
                    onchange="this.form.submit()">
                <option value="" selected="@(string.IsNullOrEmpty(Model.SortColumn))">–ü–æ –¥–∞—Ç–µ</option>
                <option value="price" selected="@(Model.SortColumn == "price")">–ü–æ —Ü–µ–Ω–µ (–¥–µ—à–µ–≤—ã–µ)</option>
                <option value="price_desc" selected="@(Model.SortColumn == "price_desc")">–ü–æ —Ü–µ–Ω–µ (–¥–æ—Ä–æ–≥–∏–µ)</option>
            </select>
        </div>
    </div>
</form>

<!-- –¢–∞–±–ª–∏—Ü–∞ —Å–µ–∞–Ω—Å–æ–≤ -->
<table class="table">
    <thead>
        <tr>
            <th>–§–∏–ª—å–º</th>
            <th>–ó–∞–ª</th>
            <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
            <th>–¶–µ–Ω–∞</th>
            <th>3D</th>
            @if (Model.IsAdmin)
            {
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Sessions)
        {
            <tr>
                <td>@item.Film?.Title</td>
                <td>@item.Hall?.CinemaInfo</td>
                <td>@item.StartDate.ToString("dd.MM.yyyy HH:mm")</td>
                <td>@item.Price.ToString("C")</td>
                <td>@(item.Is3d ? "–î–∞" : "–ù–µ—Ç")</td>
                @if (Model.IsAdmin)
                {
                    <td>
                        <a asp-page="./Edit" asp-route-id="@item.SessionId">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a> |
                        <a asp-page="./Details" asp-route-id="@item.SessionId">–î–µ—Ç–∞–ª–∏</a> |
                        <a asp-page="./Delete" asp-route-id="@item.SessionId">–£–¥–∞–ª–∏—Ç—å</a>
                    </td>
                }
            </tr>
        }
    </tbody>
</table>

<!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
<nav aria-label="Page navigation">
    <ul class="pagination">
        @if (Model.PageIndex > 1)
        {
            <li class="page-item">
                <a class="page-link" 
                   asp-page="./Index" 
                   asp-route-pageIndex="@(Model.PageIndex - 1)"
                   asp-route-filmTitle="@Model.FilmTitle"
                   asp-route-sortColumn="@Model.SortColumn"
                   asp-route-hall="@Model.Hall">–ù–∞–∑–∞–¥</a>
            </li>
        }
        
        <li class="page-item active">
            <span class="page-link">–°—Ç—Ä–∞–Ω–∏—Ü–∞ @Model.PageIndex –∏–∑ @Model.TotalPages</span>
        </li>
        
        @if (Model.PageIndex < Model.TotalPages)
        {
            <li class="page-item">
                <a class="page-link" 
                   asp-page="./Index" 
                   asp-route-pageIndex="@(Model.PageIndex + 1)"
                   asp-route-filmTitle="@Model.FilmTitle"
                   asp-route-sortColumn="@Model.SortColumn"
                   asp-route-hall="@Model.Hall">–í–ø–µ—Ä–µ–¥</a>
            </li>
        }
    </ul>
</nav>
```

6. –ú–æ–¥–µ–ª—å Hall —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–æ–º

```csharp
// Models/Hall.cs
public class Hall
{
    public byte HallId { get; set; }
    
    [Display(Name = "–ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä")]
    [Required(ErrorMessage = "–ü–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è")]
    public string Cinema { get; set; }
    
    [Display(Name = "–ù–æ–º–µ—Ä –∑–∞–ª–∞")]
    public byte HallNumber { get; set; }
    
    // –°–≤–æ–π—Å—Ç–≤–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
    [Display(Name = "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ª–µ")]
    public string CinemaInfo => $"{Cinema}, –∑–∞–ª {HallNumber}";
}
```

7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–Ω—é –≤ Layout

```html
<!-- Pages/Shared/_Layout.cshtml -->
<header>
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
        <div class="container">
            <a class="navbar-brand" asp-page="/Index">–ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                <ul class="navbar-nav flex-grow-1">
                    <li class="nav-item">
                        <a class="nav-link text-dark" asp-page="/Films/Index">–§–∏–ª—å–º—ã</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark" asp-page="/Sessions/Index">–°–µ–∞–Ω—Å—ã</a>
                    </li>
                    @if (UserRole == "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" || UserRole == "–ë–∏–ª–µ—Ç–µ—Ä")
                    {
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-page="/Tickets/Index">–ë–∏–ª–µ—Ç—ã</a>
                        </li>
                    }
                    @if (UserRole == "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä")
                    {
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-page="/Visitors/Index">–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏</a>
                        </li>
                    }
                </ul>
                <div class="navbar-text">
                    @if (!string.IsNullOrEmpty(UserRole))
                    {
                        <span class="me-3">@UserRole</span>
                        <a asp-page="/Login" asp-page-handler="logout" class="btn btn-outline-primary">–í—ã–π—Ç–∏</a>
                    }
                    else
                    {
                        <a asp-page="/Login" class="btn btn-primary">–í–æ–π—Ç–∏</a>
                    }
                </div>
            </div>
        </div>
    </nav>
</header>
```

8. Connection String –≤ appsettings.json

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\mssqllocaldb;Database=ispp3107;Trusted_Connection=True;MultipleActiveResultSets=true"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

üìã –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –õ–† ‚Ññ19

8.1 –ó–∞—á–µ–º SupportsGet = true?

–û—Ç–≤–µ—Ç: –ê—Ç—Ä–∏–±—É—Ç SupportsGet = true –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤–æ–π—Å—Ç–≤—É –º–æ–¥–µ–ª–∏ —Å–≤—è–∑—ã–≤–∞—Ç—å—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏ GET-–∑–∞–ø—Ä–æ—Å–∞—Ö. –ë–µ–∑ –Ω–µ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ —Å [BindProperty] —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ POST-–∑–∞–ø—Ä–æ—Å–∞—Ö.

8.2 –ö–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ OnGetAsync?

–û—Ç–≤–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
2. –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∏–∑ –ë–î
3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–ø–æ–∏—Å–∫)
4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
6. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
7. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

8.3 –ß–µ–º ViewBag –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç ViewData?

–û—Ç–≤–µ—Ç:

¬∑ ViewBag - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ (dynamic), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ViewData –≤–Ω—É—Ç—Ä–∏
¬∑ ViewData - —Å–ª–æ–≤–∞—Ä—å (Dictionary<string, object>)
¬∑ –û–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
¬∑ ViewBag –±–æ–ª–µ–µ —É–¥–æ–±–µ–Ω –≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ, –Ω–æ –Ω–µ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω

8.4 –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è onchange="this.form.submit()"?

–û—Ç–≤–µ—Ç: –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ä–º—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–±–æ—Ä–∞ –≤ dropdown, –≤–≤–æ–¥–∞ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞), –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫—É.

üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (–õ–† ‚Ññ18, –ø—É–Ω–∫—Ç 5.3):

```csharp
// –í –º–µ—Ç–æ–¥–µ OnPost –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—Å–æ–∑–¥–∞–Ω–∏—è
public async Task<IActionResult> OnPostAsync()
{
    // –£–±–∏—Ä–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    ModelState.Remove("Session.Film");
    ModelState.Remove("Session.Hall");
    
    if (!ModelState.IsValid)
    {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è dropdown
        ViewData["FilmId"] = new SelectList(_context.Films, "FilmId", "Title");
        ViewData["HallId"] = new SelectList(_context.Halls, "HallId", "CinemaInfo");
        return Page();
    }
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    // ...
}
```

–≠—Ç–æ –ø–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —Ç—Ä–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –≤ –æ–¥–∏–Ω –ø—Ä–æ–µ–∫—Ç. –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –≤–∫–ª—é—á–∞—è:

¬∑ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–õ–† ‚Ññ17)
¬∑ –†—É—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é (–õ–† ‚Ññ18)
¬∑ –ü–æ–∏—Å–∫, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—é (–õ–† ‚Ññ19)
